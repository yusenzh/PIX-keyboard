{"version":3,"file":"main.js","mappings":"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","sources":["webpack://keebs/./src/frontend/engine.ts","webpack://keebs/webpack/bootstrap","webpack://keebs/webpack/runtime/define property getters","webpack://keebs/webpack/runtime/hasOwnProperty shorthand","webpack://keebs/webpack/runtime/make namespace object","webpack://keebs/./src/frontend/main.ts"],"sourcesContent":["\nexport class Engine {\n\t// somewhere to stash the user-provided event handlers\n\tlisteners : {[index: string]: ()=>void;} = {};\n\n\t// somewhere to stash the loaded images\n\tloadedImages : {[index: string]: HTMLImageElement;} = {};\n\twaitingForImages : boolean = false;\n\n\t// page elements\n\ttextBox = document.getElementById(\"textBox\");\n\tcanvas : HTMLCanvasElement = document.getElementById(\"gameCanvas\") as HTMLCanvasElement;\n\tctx = this.canvas.getContext(\"2d\");\n\n\t// some sensible defaults\n\ttileSize : number = 20;\n\ttilesWide : number = 20;\n\ttilesHigh : number = 20;\n\trender : () => void = () => {\n\t\t\tconsole.log(\"This is a placeholder rendering function -- make sure to assign your own render function using `engine.setupView`.\");\n\t\t};\n\n\t// Constructor doesn't have too much to do, since the setup happens later (in user code).\n\tconstructor(){\n\t\t// Resize the canvas based on the default tile size/quantity. (This will be re-done if the user asks for a different tile size or quantity.)\n\t\tthis.canvas.width =  this.tilesWide*this.tileSize;\n\t\tthis.canvas.height = this.tilesHigh*this.tileSize;\n\n\t\tdocument.addEventListener(\"keydown\", (event) => { \n\t\t\tif (event.code in this.listeners) {\n\t\t\t\tthis.listeners[event.code]();\n\n\t\t\t\t// clear the frame\n\t\t\t\tthis.ctx.clearRect(0, 0, this.tilesWide*this.tileSize, this.tilesHigh*this.tileSize);\n\n\t\t\t\t// and render whatever we're supposed to render\n\t\t\t\tthis.render();\n\t\t\t}\n\t\t})\n\t}\n\n\t// Internal helper function to load images from a list of image names.\n\tasync loadImages(listOfImages : Array<string>) {\n\t\tconsole.log(\"Loading images...\");\n\t\tawait Promise.all(listOfImages.map((imageName) => {\n\t\t\tif (! (imageName in this.loadedImages)) {\n\t\t\t\tthis.loadedImages[imageName] = new Image(); // Create new img element\n\t\t\t\tlet promise = new Promise((resolve) => this.loadedImages[imageName].addEventListener(\"load\", resolve)); // set up the Promise to wait for (so we'll know when we're done)\n\t\t\t\tthis.loadedImages[imageName].src = imageName+\".png\"; // Set source path\n\t\t\t\treturn promise;\n\t\t\t}\n\t\t}));\n\t\tconsole.log(\"Images loaded: \"+listOfImages.join(\", \"));\n\t\tthis.waitingForImages = false;\n\t}\n\n// ====================================================================================\n// The user of this class should *only* need to refer to the functions below this line.\n// ====================================================================================\n\t// setupView sets up everything view-specific. The argument should be an object with the following keys:\n\t// \t\t\"tileSize\": size of each tile, in pixels \n\t// \t\t\"tilesWide\": width of the world, in tiles\n\t// \t\t\"tileHigh\": width of the world, in tiles\n\t// \t\t\"render\": your function to render the world (the main function of your View)\n\t// \t\t\"imagesToLoad\": if you are using drawTileAt to draw image tiles in your renderer, you must provide a list of the image names here. These names are how you refer to them in with the drawTileAt function, and they should be the *same* as the name of an actual .png file stored in the same directory as the rest of the project files.\n\n\tsetupView(viewInfo : {\"tileSize\"?: number, \"tilesWide\"?: number, \"tilesHigh\"?: number, \"render\"?: ()=>void, \"imagesToLoad\"?:Array<string>}) : void {\n\t\tif (\"tileSize\" in viewInfo) this.tileSize = viewInfo.tileSize;\n\t\tif (\"tilesWide\" in viewInfo) this.tilesWide = viewInfo.tilesWide;\n\t\tif (\"tilesHigh\" in viewInfo) this.tilesHigh = viewInfo.tilesHigh;\n\n\t\tthis.canvas.width =  this.tilesWide*this.tileSize;\n\t\tthis.canvas.height = this.tilesHigh*this.tileSize;\n\n\t\tif (\"render\" in viewInfo) this.render = viewInfo.render;\n\n\t\tif (\"imagesToLoad\" in viewInfo) {\n\t\t\tthis.waitingForImages = true;\n\t\t\tthis.loadImages(viewInfo.imagesToLoad);\n\t\t}\n\t}\n\n\t// setupController registers the possible event handlers.\n\t// The argument should be an object with keys corresponding to:\n\t// - \"start\" for your game-starting code\n\t// - one for each of the keycodes (https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/code) you want to use; for example, the keycode for the \"1\" key is \"Digit1\" and the keycode for the \"a\" key is \"KeyA\".\n\t\n\tsetupController(controllerInfo: {[index: string]: ()=>void;}) : void {\n\t\tthis.listeners = controllerInfo;\n\t}\n\n\t// startGame will wait until the images are all loaded, then run your registered \"start\" function and your renderer.\n\tstartGame(): void {\n\t\t// If it's still waiting on images to load, wait and try again 100ms later. \n\t\tif (this.waitingForImages) {\n\t\t\tsetTimeout(() => this.startGame(), 100);\n\t\t}\n\t\telse {\n\t\t\tthis.listeners.start();\n\t\t\tthis.render();\n\t\t}\n\t}\n\n\t// Write text into the textBox element. Because it is done with \"innerText\", you can use html elements (such as <br> for a linebreak) in it, if you want.\n\twriteText(text: string) : void {\n\t\tthis.textBox.innerText = text;\n\t}\n\n\t// Fill the tile at this x, y location with the given color. \n\t// Remember that x and y have their origin at the top left, so (0,0) is the top-left-most tile, (0,1) is the next one down, etc.\n\t// The color can be any string that can be parsed as a CSS color value. For example:\n\t// a hex string: \"11eaea\"\n\t// an RGB specification \"rgb(17, 234, 234)\"\n\t// an HSLA specification \"hsla(180deg, 86%, 49%, 0.5)\"\n\tfillTile(x : number, y : number, color : string) : void {\n\t\tthis.ctx.fillStyle = color;\n\t\tthis.ctx.fillRect(x*this.tileSize, y*this.tileSize, this.tileSize, this.tileSize);\n\t}\n\n\t// At location x, y, draw the image with this filename (without \".png\").\n\t// Remember that if you want to use this, you need to load your images in your call to setupView.\n\t// png files can have transparent parts, so you may find it useful to layer them onto the same tile. If you imagine them as layers (like in Photoshop), you need to draw the lower layers before the upper layers.\n\t// Your tile images probably *should* be the same size as the tileSize that you set in setupView (it seems easier to think about?), but technically there's nothing enforcing this. \n\tdrawTileAt(x: number, y: number, imageName: string) : void {\n\t\tif (! (imageName in this.loadedImages)) {\n\t\t\tconsole.warn(\"Image was not loaded: \" + imageName);\n\t\t}\n\n\t\telse {\n\t\t\tthis.ctx.drawImage(this.loadedImages[imageName], x*this.tileSize, y*this.tileSize);\n\t\t}\n\n\t}\n\n}\n\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { Engine } from \"./engine\";\nlet engine : Engine = new Engine();\n\n// This function will be run when the page loads. It will handle making new elements, attaching event listeners, etc. \n// We are going to build a calculator \nwindow.onload = () => {\n    let canvas : HTMLCanvasElement = document.getElementById(\"gameCanvas\") as HTMLCanvasElement ;\n    \n    let draw : CanvasRenderingContext2D = canvas.getContext(\"2d\");\n    const TILE = 250;\n\n\tlet drawingCurrentPicAtX : number = 0;\n\tlet drawingCurrentPicAtY : number = 0;\n\n    // Start loading images so engine.loadedImages[\"a\"] is defined\n    engine.setupView({ \n\t\ttileSize: 9, \n\t\ttilesWide: 85, \n\t\ttilesHigh: 85, \n\t\timagesToLoad: [\"a\", \"n\", \"e\", \"l\", \"i\", \"o\", \"r\", \"s\", \"h\"], \n\t\trender: () => {} \n\t})\n\n\tdocument.addEventListener(\"keydown\", (event: KeyboardEvent) => { \n\t\tlet img: HTMLImageElement;\n        if (event.code == \"Digit1\") {\n            console.log(\"1!\");\n            // Safely draw only after the image is available\n            img = engine.loadedImages[\"a\"];\n        }\n\t\telse if (event.code == \"Digit2\") {\n\t\t\tconsole.log(\"2!\");\n\t\t\timg = engine.loadedImages[\"n\"];\n\t\t}\n\t\telse if (event.code == \"Digit3\") {\n\t\t\tconsole.log(\"3!\");\n\t\t\timg = engine.loadedImages[\"e\"];\n\t\t}\n\t\telse if (event.code == \"Digit4\") {\n\t\t\tconsole.log(\"4!\");\n\t\t\timg = engine.loadedImages[\"l\"];\n\t\t}\n\t\telse if (event.code == \"Digit5\") {\n\t\t\tconsole.log(\"5!\");\n\t\t\timg = engine.loadedImages[\"i\"];\n\t\t}\n\t\telse if (event.code == \"Digit6\") {\n\t\t\tconsole.log(\"6!\");\n\t\t\timg = engine.loadedImages[\"o\"];\n\t\t}\n\t\telse if (event.code == \"Digit7\") {\n\t\t\tconsole.log(\"7!\");\n\t\t\timg = engine.loadedImages[\"r\"];\n\t\t}\n\t\telse if (event.code == \"Digit8\") {\n\t\t\tconsole.log(\"8!\");\n\t\t\timg = engine.loadedImages[\"s\"];\n\t\t}\n\t\telse if (event.code == \"Digit9\") {\n\t\t\tconsole.log(\"9!\");\n\t\t\timg = engine.loadedImages[\"h\"];\n\t\t}\n        console.log(\"Drawing image at \", drawingCurrentPicAtX, drawingCurrentPicAtY);\n        // Compute last valid X start so tiles never spill outside the canvas\n        const lastStartX = Math.max(0, (Math.floor(canvas.width / TILE) - 1) * TILE);\n\n        // If our cursor somehow points past the last valid slot, wrap before drawing\n        if (drawingCurrentPicAtX > lastStartX) {\n            drawingCurrentPicAtX = 0;\n            drawingCurrentPicAtY += TILE;\n        }\n\n        const drawNow = () => draw.drawImage(img, drawingCurrentPicAtX, drawingCurrentPicAtY, TILE, TILE);\n        if (img.complete && img.naturalWidth > 0) {\n            drawNow();\n        } else {\n            img.addEventListener(\"load\", drawNow, { once: true });\n        }\n        // Advance cursor to the next slot; if we were at the last valid slot, wrap now\n        if (drawingCurrentPicAtX >= lastStartX) {\n            drawingCurrentPicAtX = 0;\n            drawingCurrentPicAtY += TILE;\n        } else {\n            drawingCurrentPicAtX += TILE;\n        }\n\t});\n\n\t// If the user hits the space bar, delete the last drawn image\n\tdocument.addEventListener(\"keydown\", (event: KeyboardEvent) => { \n        if (event.code == \"Space\") {\n            console.log(\"Space!\");\n            // Clear the last drawn image\n            if (drawingCurrentPicAtX === 0 && drawingCurrentPicAtY === 0) {\n                // Nothing to erase\n                return;\n            }\n            if (drawingCurrentPicAtX === 0) {\n                // Move to the last actually-used slot of the previous row.\n                drawingCurrentPicAtY -= TILE;\n                const lastSlotX = Math.max(0, (Math.floor(canvas.width / TILE) - 1) * TILE);\n                drawingCurrentPicAtX = lastSlotX;\n            } else {\n                drawingCurrentPicAtX -= TILE;\n            }\n            draw.clearRect(drawingCurrentPicAtX, drawingCurrentPicAtY, TILE, TILE);\n        }\n    });\n}\n"],"names":[],"sourceRoot":""}